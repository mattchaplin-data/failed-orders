(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3769],{33769:function(e,t,o){Promise.resolve().then(o.bind(o,6052)),Promise.resolve().then(o.t.bind(o,24587,23))},73405:function(e,t,o){"use strict";var n=o(994),r=o(81075),i=o(52749),s=o(76664),a=o(89036),u=o(99890),c=o(11301),l=o(46376),f=(0,c.q)(function(e){var t=e.graphQLErrors,o=e.networkError;t&&t.forEach(function(e){var t=e.message,o=e.locations,n=e.path;return console.log("[GraphQL error]: Message: ".concat(t,", Location: ").concat(o,", Path: ").concat(n))}),o&&console.log("[Network error]: ".concat(o))}),h=new r.i(function(e,t){var o=l.S9.getToken();return e.setContext(function(e){var t=e.headers;return{credentials:"same-origin",headers:(0,n._)({Authorization:o&&"Token ".concat(o)||null},t)}}),t(e)}),d=new i.u({uri:"".concat("https://api.stratascratch.com","/graphql/"),fetch:fetch}),_=new s.f({link:(0,a.D)([f,h,d]),cache:new u.h({possibleTypes:{QuestionType:["EducationalQuestionType","TechnicalQuestionType"],BaseCommentType:["CodingQuestionCommentType","NonCodingQuestionCommentType","DataProjectCommentType"]},typePolicies:{EducationalQuestionType:{fields:{isCorrectSolution:{keyArgs:function(e,t){var o;return"isCorrectSolution:codeType:".concat(null===(o=t.variables)||void 0===o?void 0:o.codeType)}}}},AnalyticsType:{fields:{totals:{merge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n._)({},e,t)}}}}}})});t.Z=_},46376:function(e,t,o){"use strict";o.d(t,{Ho:function(){return a},S9:function(){return u},ri:function(){return fetchWithAuth}});var n=o(994),r=o(83323),i=o(17891),s=(0,o(52026).j2)("production"),a=s.AuthProvider,u=s.tokenUtils;function fetchWithAuth(){for(var e,t=arguments.length,o=Array(t),s=0;s<t;s++)o[s]=arguments[s];var a=(0,i._)(o),c=u.getToken();return c&&(a[1]=(0,r._)((0,n._)({},a[1]),{headers:(0,n._)({Authorization:"Token ".concat(c)},null===(e=a[1])||void 0===e?void 0:e.headers)})),fetch.apply(void 0,(0,i._)(a))}},53088:function(e,t,o){"use strict";var n=o(25159),r=o(37098);t.Z=function(){return(0,n.jsx)("div",{className:"LoaderScreen",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"calc(100vh - 5rem)"},children:(0,n.jsx)(r.Z,{})})}},42570:function(e,t,o){"use strict";var n=o(994),r=o(49871),i=o.n(r),s=o(46376).S9.getToken,a=i().create({baseURL:"https://api.stratascratch.com",timeout:18e4,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(function(e){var t=s(),o=(0,n._)({},e);return t&&(o.headers.Authorization="Token ".concat(t)),o}),t.Z=a},96939:function(e,t){"use strict";t.Z={authGitHub:"/rest-auth/github/url/",loginGitHub:"/rest-auth/github/login/",authGoogle:"/rest-auth/google/url/",loginGoogle:"/rest-auth/google/login/",authFacebook:"/rest-auth/facebook/url/",loginFacebook:"/rest-auth/facebook/login/",sendEmailVerification:"/users/send-email-verification/",registration:"/rest-auth/registration/",changeUser:"/users/update-user/",forgotPassword:"/rest-auth/password/reset/",confirmResetPassword:"/rest-auth/password/reset/confirm/",changePassword:"/rest-auth/password/change/",executeSQL:"/execute-sql/",executeAlgorithm:"/execute-algo/",tablePreviews:"/table-previews/:tableName/",expectedOutputs:"/expected-outputs/:slug/",paymentStatus:"/users/payment-status/",paymentPlans:"/users/payment-plans/",setupIntent:"/users/payment-intent/",checkout:"/users/checkout/",discount:"/users/discount/",downgrade:"/users/downgrade/",reset:"/users/reset/",randomUsername:"/users/random-username/",emailSubscription:"/users/email-subscription/",graphQL:"/graphql/"}},24834:function(e,t,o){"use strict";o.d(t,{Z:function(){return n}});var n={HOME_VIEW:"/",CODING_QUESTIONS:"/coding",SINGLE_CODING_QUESTION_OLD:"/coding-question",SINGLE_ALGORITHM_QUESTION:"/algorithm-question/:slug",SINGLE_CODING_QUESTION:"/coding/:slug",EDUCONTENT_SOLUTION:"/coding/:slug/solution",EDUCONTENT_OUTPUT_PREVIEW:"/coding/output-preview",EDUCONTENT_CODE_PREVIEW:"/coding/code-preview",REGISTRATION_VIEW:"/registration",ACCOUNT_SETTINGS:"/account-settings",USER_PERFORMANCE_VIEW:"/user",CHANGE_USERNAME_VIEW:"/change-username",CHANGE_PASSWORD_VIEW:"/change-password",PASSWORD_RESET:"/confirm-reset",PRICING_LIST_VIEW:"/pricing",CHECKOUT_VIEW:"/checkout",THANK_YOU:"/thank-you",LOGIN_VIEW:"/login",LOGOUT:"/logout",GITHUB_AUTH_CALLBACK:"/github-auth-callback",GOOGLE_AUTH_CALLBACK:"/google-auth-callback",FACEBOOK_AUTH_CALLBACK:"/facebook-auth-callback",PROVIDE_EMAIL:"/provide-email",FORGOT_PASSWORD_VIEW:"/forgot-password",TECHNICAL_QUESTION:"/technical/:slug",NON_CODING_QUESTIONS:"/technical",DATA_PROJECTS:"/data-projects",DATA_PROJECT:"/data-projects/:slug",TERMS_AND_CONDITIONS:"/terms-and-conditions",PRIVACY_POLICY:"/privacy-policy"}},6052:function(e,t,o){"use strict";o.r(t);var n=o(96070),r=o(21221),i=o(25159),s=o(33904),a=o(59134),u=o(77736),c=o(52026),l=o(46376),f=o(53088),h=o(24834),d=o(42570),_=o(73405),g=o(96939),p=l.S9.saveTokenToCookie;t.default=function(){var e=(0,a.useRouter)(),t=(0,a.usePathname)(),o=(0,a.useSearchParams)(),l=(0,c.aC)().syncUser;return(0,s.useEffect)(function(){function _redirectAfterLogin(){return(_redirectAfterLogin=(0,n._)(function(){var n,i,s,a,f;return(0,r.Jh)(this,function(r){switch(r.label){case 0:if(n=o.get("code"),!(i=t.includes(h.Z.GITHUB_AUTH_CALLBACK)?g.Z.loginGitHub:t.includes(h.Z.GOOGLE_AUTH_CALLBACK)?g.Z.loginGoogle:t.includes(h.Z.FACEBOOK_AUTH_CALLBACK)?g.Z.loginFacebook:null))return[2];r.label=1;case 1:return r.trys.push([1,7,,8]),[4,d.Z.post(i,{code:n})];case 2:if(200!==(s=r.sent()).status)return[3,5];return p(s.data.key),[4,l()];case 3:return r.sent(),[4,_.Z.resetStore()];case 4:return r.sent(),a=(0,c.ej)("next_url")||h.Z.CODING_QUESTIONS,(0,c.kT)("next_url"),e.replace(a),[3,6];case 5:throw Error("Bad response");case 6:return[3,8];case 7:return f=r.sent(),u.Tb(f),e.replace(h.Z.LOGIN_VIEW),[3,8];case 8:return[2]}})})).apply(this,arguments)}!function(){_redirectAfterLogin.apply(this,arguments)}()},[]),(0,i.jsx)(f.Z,{})}},24587:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var o in t)Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}(t,{suspense:function(){return suspense},NoSSR:function(){return NoSSR}});var n=o(87536);function suspense(){var e=Error(n.NEXT_DYNAMIC_NO_SSR_CODE);throw e.digest=n.NEXT_DYNAMIC_NO_SSR_CODE,e}function NoSSR(e){return e.children}},52026:function(e,t,o){"use strict";o.d(t,{j2:function(){return configureAuth},kT:function(){return deleteCookie},ej:function(){return getCookie},d8:function(){return setCookie},aC:function(){return useAuth}});var n=o(994),r=o(83323),i=o(18223),s=o(25159);function getCookie(e){var t=document.cookie.match(new RegExp("(?:^|; )".concat(e.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1"),"=([^;]*)")));return t?decodeURIComponent(t[1]):void 0}function setCookie(e,t,o){var n="";if(o){var r=new Date;r.setTime(r.getTime()+864e5*o),n="; expires=".concat(r.toUTCString())}document.cookie="".concat(e,"=").concat(t||"").concat(n,"; path=/")}var deleteCookie=function(e){document.cookie="".concat(e,"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;")};function getCookieDomain(e){return"production"===e||"staging"===e?";domain=stratascratch.com":""}var src_tokenUtils=function(e){var t=e&&"production"!==e?"system_user_logged_".concat(e):"system_user_logged";function saveTokenToCookie(o){var n=getCookieDomain(e);setCookie(t,"".concat(o," ").concat(n),60)}return{getToken:function(){var e=getCookie(t);if(e)return localStorage.removeItem(t),e;var o=localStorage.getItem(t);return o?(saveTokenToCookie(o),localStorage.removeItem(t),o):null},saveTokenToCookie:saveTokenToCookie,deleteTokenCookie:function(){var o=getCookieDomain(e);setCookie(t," ".concat(o),-999)},saveTokenToLocalStorage:function(e){localStorage.setItem(t,e)}}},a=o(96070),u=o(11843),c=o(21221),l=o(33904),f=(0,l.createContext)(void 0);function AuthProvider(e){var t,o,n=e.children,r=e.params,i=r.APIUrl,h=src_tokenUtils(r.env),d=h.getToken,_=h.deleteTokenCookie,g=h.saveTokenToCookie,p=(0,u._)((0,l.useState)(null),2),T=p[0],m=p[1],v=!!T,k=!!(null==T?void 0:T.is_premium),logout=function(){localStorage.clear(),_(),m(null)},C=(t=(0,a._)(function(){var e,t;return(0,c.Jh)(this,function(o){switch(o.label){case 0:if(!(e=d()))return m(null),[2];return[4,fetch(i.replace(/\/$/,"")+"/users/me/",{headers:{Authorization:"Token ".concat(e)}})];case 1:if(!(t=o.sent()).ok)return[3,3];return[4,t.json()];case 2:return m(o.sent()),[3,4];case 3:logout(),o.label=4;case 4:return[2]}})}),function(){return t.apply(this,arguments)}),E=(o=(0,a._)(function(e){var t,o;return(0,c.Jh)(this,function(n){switch(n.label){case 0:return[4,fetch(i.replace(/\/$/,"")+"/rest-auth/login/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:return[4,(t=n.sent()).json()];case 2:if(o=n.sent(),!(t.ok&&"key"in o))return[3,4];return g(o.key),[4,C()];case 3:n.sent(),n.label=4;case 4:if(!t.ok&&"non_field_errors"in o)throw Error(o.non_field_errors[0]);if(!t.ok&&"email"in o)throw Error(o.email[0]);if(!t.ok)throw Error("An error has occured");return[2]}})}),function(e){return o.apply(this,arguments)});(0,l.useEffect)(function(){C()},[]);var A=(0,l.useMemo)(function(){return{user:T,isAuthenticated:v,isPremium:k,login:E,logout:logout,syncUser:C}},[T,v]);return(0,s.jsx)(f.Provider,{value:A,children:n})}function useAuth(){var e=(0,l.useContext)(f);if(void 0===e)throw Error("useAuth must be within a AuthProvider component");return e}function configureAuth(e){return{tokenUtils:src_tokenUtils(e),AuthProvider:function(t){var o=t.params,a=(0,i._)(t,["params"]);return(0,s.jsx)(AuthProvider,(0,r._)((0,n._)({},a),{params:(0,n._)({env:e},o)}))}}}},85844:function(e,t,o){"use strict";var n=o(994),r=o(83323),i=o(25159);t.Z=function(e){return(0,i.jsx)("svg",(0,r._)((0,n._)({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24"},e),{children:(0,i.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48 2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48 2.83-2.83"})}))}},37098:function(e,t,o){"use strict";var n=o(25159),r=o(85844);o(96408),t.Z=function(){return(0,n.jsx)(r.Z,{className:"Loader__icon"})}},96408:function(){},42499:function(e,t,o){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=o(33904),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,o){var n,i={},c=null,l=null;for(n in void 0!==o&&(c=""+o),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,n)&&!u.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:r,type:e,key:c,ref:l,props:i,_owner:a.current}}t.Fragment=i,t.jsx=q,t.jsxs=q},25159:function(e,t,o){"use strict";e.exports=o(42499)},59134:function(e,t,o){e.exports=o(98609)}}]);